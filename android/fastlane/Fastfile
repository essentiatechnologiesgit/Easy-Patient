# This file contains the fastlane.tools configuration
# You can find the documentation at https://docs.fastlane.tools
#
# For a list of all available actions, check out
#
#     https://docs.fastlane.tools/actions
#
# For a list of all available plugins, check out
#
#     https://docs.fastlane.tools/plugins/available-plugins
#

# Uncomment the line if you want fastlane to automatically update itself
# update_fastlane

default_platform(:android)

platform :android do
    # LANE 1
    desc "Publish a new version to the Google Play (INTERNAL)"
    lane :internal do

         # Build the AAB file using Gradle
    
        # Upload AAB to Google Play Store's internal track
        supply(
         
          # Use environment variables for metadata
          metadata: {
            title: ENV['APP_TITLE'],
            short_description: ENV['APP_SHORT_DESCRIPTION'],
            full_description: ENV['APP_FULL_DESCRIPTION'],
            contact_email: ENV['APP_CONTACT_EMAIL'],
            privacy_policy_url: ENV['APP_PRIVACY_POLICY_URL']
          },
          
          skip_upload_metadata: false,  # Enable metadata upload
          skip_upload_images: true,     # Skip image upload (optional)
          skip_upload_screenshots: true, # Skip screenshots upload (optional)
          
          json_key: "fastlane/easy-patient-a6d4e-8bff30fb735c.json", # Path to your JSON key file
          package_name: "com.easypatientdynamic",  # Your app's package name
        
          version_code: ENV['APP_VERSION_CODE'],   # App version code
          version_name: ENV['APP_VERSION_NAME'],   # App version name
          language: ENV['APP_LANGUAGE']            # App language
        )

    end
end

